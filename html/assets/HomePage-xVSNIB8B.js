import{_ as B,a as q,a0 as $,a2 as l,a9 as _,a5 as z,a6 as w,af as g,a8 as k,ah as G,$ as E,r as x,o as j,ab as v,aa as S,a3 as y,ae as F}from"./index-CNtXdC1N.js";import{u as H}from"./use-quasar-BmFTOaXb.js";import{a as N,n as Q}from"./index-4onaSzD2.js";import"./axios-DXsv3KKR.js";const R=B({__name:"GroupVideo",props:{data:{}},setup(u,{expose:d}){d();const t={fileSize:q(()=>o=>{const r=["字节","KB","MB","GB","TB"];let a=0;for(;o>=1024&&a<r.length-1;)o/=1024,a++;return`${parseFloat(o.toFixed(2))} ${r[a]}`})};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),L={class:"video-src"},M={class:"text-name"},O={key:0,class:"text-name file-size"};function U(u,d,s,t,o,r){return l(),_("div",L,[z(w,{name:s.data.is_dir?"mdi-folder-play":"mdi-movie-open",size:"100px",class:"icon-large",color:s.data.is_dir?"orange":"green"},null,8,["name","color"]),g("div",M,k(s.data.name),1),s.data.is_dir?G("",!0):(l(),_("div",O,k(t.fileSize(s.data.size)),1))])}const D=$(R,[["render",U],["__scopeId","data-v-b90d00da"],["__file","GroupVideo.vue"]]),K=B({__name:"HomePage",props:{pathParams:{}},setup(u,{expose:d}){d(),document.title="视频列表";const s=H(),t=E(),o=u,r=x([]),a={path:"",name:"全部",hash:""},i=x([a]);function h(e){p(e.hash,e.path)}function C(e){if(e.is_dir)p(e.hash,e.path);else{const n=`/play/${e.hash}/${encodeURIComponent(e.path)}`;window.open(n,"_blank")}}function p(e,n){N.post("video/list",{hash:e,path:n}).then(I=>{const m=I.data;if(m.error)Q(s,m.error);else if(m.video_list){i.value=[{hash:"",path:"",name:"全部"}],n.split("\\").forEach((c,f,V)=>{c!==""&&i.value.push({hash:e,path:V.slice(0,f+1).join("\\"),name:c})});let P="/home/"+e;n!==""&&(P+="/"+encodeURIComponent(n)),t.push(P),r.value=[],m.video_list.filter(c=>!c.name.startsWith(".")).sort((c,f)=>(f.is_dir?1:0)-(c.is_dir?1:0)).forEach(c=>{r.value.push(c)})}})}j(()=>{let e="",n="";o.pathParams.length>0&&(e=o.pathParams[0]),o.pathParams.length>1&&(n=o.pathParams[1]),p(e,n)});const b={$q:s,router:t,props:o,items:r,root_btn:a,path_btns:i,selectPath:h,selectItem:C,reqVideoList:p,GroupVideo:D};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),T={class:"row q-pa-md q-gutter-md"},W={class:"row q-pa-md q-gutter-md"};function A(u,d,s,t,o,r){return l(),_(v,null,[g("div",T,[(l(!0),_(v,null,S(t.path_btns,(a,i)=>(l(),y(F,{key:i,push:"",label:a.name,color:"orange",onClick:h=>t.selectPath(a)},null,8,["label","onClick"]))),128))]),g("div",W,[(l(!0),_(v,null,S(t.items,(a,i)=>(l(),y(t.GroupVideo,{key:i,data:a,onClick:h=>t.selectItem(a)},null,8,["data","onClick"]))),128))])],64)}const ee=$(K,[["render",A],["__scopeId","data-v-1cd9bbcc"],["__file","HomePage.vue"]]);export{ee as default};
