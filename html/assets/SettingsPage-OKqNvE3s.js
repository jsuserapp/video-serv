import{_ as E,r as y,o as V,a0 as D,a2 as S,a9 as x,af as s,a5 as r,ai as p,ae as b,a4 as F,ab as B,a6 as g}from"./index-CpxYtpAV.js";import{u as P}from"./use-quasar-E4HttSAV.js";import{a as d,n as c,b as h,s as k}from"./index-DlCOeGSQ.js";import"./axios-DXsv3KKR.js";const q=E({__name:"SettingsPage",setup(C,{expose:e}){e(),document.title="设置";const a=P(),t=y(""),n=y({start:0,end:0});function m(){if(typeof n.value.start!="number"||typeof n.value.end!="number"){c(a,"请输入有效的数字");return}const i={start:n.value.start,end:n.value.end};d.post("play/position/save",i).then(l=>{const o=l.data;o.error?c(a,o.error):h(a,"保存成功")})}function u(){const l={source_list:Array.from(new Set(t.value.split(`
`).map(o=>o.trim()).filter(o=>o!==""))).map(o=>({path:o,hash:k(o)}))};d.post("source/list/save",l).then(o=>{const v=o.data;v.error?c(a,v.error):h(a,"保存成功")})}function _(){d.post("source/list").then(i=>{t.value=i.data.source_list.map(l=>l.path).join(`
`)}),d.post("play/position").then(i=>{n.value=i.data.play_position})}V(()=>{_()});const f={$q:a,src_folders:t,play_position:n,savePlayPosition:m,saveSourceList:u,reqSourceList:_};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),A={class:"row q-pa-md q-gutter-md"},w={style:{width:"415px"}},Q={class:"q-justify-end items-end",style:{width:"160px"}},j={class:"row q-pa-md q-gutter-md"},I={class:"number-input"},L={class:"number-input"},M={class:"col-4 right"};function U(C,e,a,t,n,m){return S(),x(B,null,[s("div",A,[e[3]||(e[3]=s("div",{class:"col-12 group-title"},"视频源文件夹",-1)),s("div",w,[r(p,{modelValue:t.src_folders,"onUpdate:modelValue":e[0]||(e[0]=u=>t.src_folders=u),outlined:"",type:"textarea",placeholder:"输入媒体源文件夹, 每行一个"},null,8,["modelValue"])]),s("div",Q,[r(b,{push:"",class:"btn-blue",icon:"mdi-content-save",label:"保存",onClick:t.saveSourceList})])]),s("div",j,[e[4]||(e[4]=s("div",{class:"col-12 group-title"},"跳过片头片尾",-1)),s("div",I,[r(p,{modelValue:t.play_position.start,"onUpdate:modelValue":e[1]||(e[1]=u=>t.play_position.start=u),modelModifiers:{number:!0},type:"number",outlined:"",label:"跳过片头(秒)",placeholder:"此处为空表示禁用采集延迟"},{prepend:F(()=>[r(g,{name:"mdi-sort-clock-ascending"})]),_:1},8,["modelValue"])]),s("div",L,[r(p,{modelValue:t.play_position.end,"onUpdate:modelValue":e[2]||(e[2]=u=>t.play_position.end=u),modelModifiers:{number:!0},type:"number",outlined:"",label:"跳过片尾(秒)"},{prepend:F(()=>[r(g,{name:"mdi-sort-clock-descending"})]),_:1},8,["modelValue"])]),s("div",M,[r(b,{push:"",color:"orange",icon:"mdi-content-save",label:"保存",onClick:t.savePlayPosition})])])],64)}const H=D(q,[["render",U],["__scopeId","data-v-e5a45811"],["__file","SettingsPage.vue"]]);export{H as default};
