import{_ as B,a as q,a0 as $,a2 as c,a9 as _,a5 as z,a6 as w,af as g,a8 as x,ah as G,$ as E,r as b,o as j,ab as v,aa as S,a3 as y,ae as F}from"./index-BkXD8g96.js";import{u as H}from"./use-quasar-hsGfR9d5.js";import{a as N,n as Q}from"./index-CJvnpotm.js";import"./axios-DXsv3KKR.js";const R=B({__name:"GroupVideo",props:{data:{}},setup(u,{expose:d}){d();const t={fileSize:q(()=>o=>{const i=["字节","KB","MB","GB","TB"];let a=0;for(;o>=1024&&a<i.length-1;)o/=1024,a++;return`${parseFloat(o.toFixed(2))} ${i[a]}`})};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),L={class:"video-src"},M={class:"text-name"},O={key:0,class:"text-name file-size"};function U(u,d,s,t,o,i){return c(),_("div",L,[z(w,{name:s.data.is_dir?"mdi-folder-play":"mdi-movie-open",size:"100px",class:"icon-large",color:s.data.is_dir?"orange":"green"},null,8,["name","color"]),g("div",M,x(s.data.name),1),s.data.is_dir?G("",!0):(c(),_("div",O,x(t.fileSize(s.data.size)),1))])}const D=$(R,[["render",U],["__scopeId","data-v-b90d00da"],["__file","GroupVideo.vue"]]),K=B({__name:"HomePage",props:{pathParams:{}},setup(u,{expose:d}){d(),document.title="视频列表";const s=H(),t=E(),o=u,i=b([]),a={path:"",name:"全部",hash:""},l=b([a]);function f(e){p(e.hash,e.path)}function C(e){if(e.is_dir)p(e.hash,e.path);else{const n=`/play/${e.hash}/${encodeURIComponent(e.path)}`;window.open(n,"_blank")}}function p(e,n){N.post("video/list",{hash:e,path:n}).then(I=>{const m=I.data;if(m.error)Q(s,m.error);else if(m.video_list){l.value=[{hash:"",path:"",name:"全部"}],n.split("\\").forEach((r,h,V)=>{r!==""&&l.value.push({hash:e,path:V.slice(0,h+1).join("\\"),name:r})});let k="/home/"+e;n!==""&&(k+="/"+encodeURIComponent(n)),t.push(k),i.value=[],m.video_list.filter(r=>!(r.name.startsWith(".")&&r.name!==".conf")).sort((r,h)=>(h.is_dir?1:0)-(r.is_dir?1:0)).forEach(r=>{i.value.push(r)})}})}j(()=>{let e="",n="";o.pathParams.length>0&&(e=o.pathParams[0]),o.pathParams.length>1&&(n=o.pathParams[1]),p(e,n)});const P={$q:s,router:t,props:o,items:i,root_btn:a,path_btns:l,selectPath:f,selectItem:C,reqVideoList:p,GroupVideo:D};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),T={class:"row q-pa-md q-gutter-md"},W={class:"row q-pa-md q-gutter-md"};function A(u,d,s,t,o,i){return c(),_(v,null,[g("div",T,[(c(!0),_(v,null,S(t.path_btns,(a,l)=>(c(),y(F,{key:l,push:"",label:a.name,color:"orange",onClick:f=>t.selectPath(a)},null,8,["label","onClick"]))),128))]),g("div",W,[(c(!0),_(v,null,S(t.items,(a,l)=>(c(),y(t.GroupVideo,{key:l,data:a,onClick:f=>t.selectItem(a)},null,8,["data","onClick"]))),128))])],64)}const ee=$(K,[["render",A],["__scopeId","data-v-328d37a7"],["__file","HomePage.vue"]]);export{ee as default};
